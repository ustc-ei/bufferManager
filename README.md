# bufferManager

《高级数据库系统》课程实验

> 实现了 LRU、LRU-k 策略的 Cache

并发操作后续可能会实现, 但是实验框架已经给定了, 只用一个标志位 `latch` 可能会有点麻烦, 我之前的想法是加一个读锁和写锁, golang 的标准库里面可以直接调用。但是既然框架代码不能更改, 只能试着写了, 看下后面有没有时间去实现。

如果只用一个标志位, 需要在 goroutine 开始之前判定对应的 BCB 块是否已经加锁(读和写之前都加锁), 然后在更新到 cache 之后把锁解开。

waitGroup 的大小设定为 100, 最多有 100 个 goroutine 读写 buffer

> 实验有些地方感觉还是不太合理, 比如判定 pageID 是否在 buffer 中, 可以增加 bitsmap 数据结构去判定, 而不是搜 BCB 链表。

2023.11.13